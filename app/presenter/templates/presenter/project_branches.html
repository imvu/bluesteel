{% extends "presenter/base.html" %}

{% load staticfiles %}

{% block data_body %}
<ul class="no_dots no_indent horizontal_list">
    {% for branch in branches %}
        <li class="horizontal">
            <div class="container_small container_height">
                <ul class="no_dots no_indent">
                    <li>
                        <div class="upper_card white_card card_padding_small">
                            <div class="title centered">Branch - {{branch.name}}</div>
                        </div>
                    </li>
                    <li>
                        <div class="middle_card white_card card_padding_small">
                            <ul class="no_dots no_indent vertical_margin horizontal_list">
                                <li class="horizontal">
                                    <button     class="btn_round light"
                                                type='button'
                                                onclick="window.location='{{branch.url.links}}'"
                                    >Branch data</button>
                                </li>
                            </ul>
                        </div>
                    </li>
                    {% for commit in branch.commits %}
                    <li>
                        <div    class="middle_card white_card_hoverable card_padding_small"
                                onclick="window.location='{{commit.url.executions}}'"
                        >
                            <div class="command">{{commit.short_hash}}</div>
                            <div class="normal indent_2">{{commit.author.name}}</div>
                            <!-- </br> -->
                            <!-- <div class="list_label indent_1">STATUS</div> -->
                            <div class="progress_bar">
                                <div class="progress_value progress_normal" style="width: {{commit.benchmark_completed}}%"></div>
                            </div>
                        </div>
                    </li>
                    {% endfor %}
                    <li>
                        <div class="lower_card white_card card_padding_large">
                            <div class="list_label indent_1">FORK COMMIT</div>
                            <div class="command indent_2">{{branch.merge_target.fork_point.short_hash}}</div>
                            <div class="list_label indent_1">MERGE TARGET</div>
                            <div class="container_input">
                                <select     class="selection individual"
                                            name="merge_target_select"
                                            onchange="change_branch_merge_target(this, '{{url.change_merge_target}}', '{{branch.name}}');"
                                >
                                    {% for info in branch.branch_info %}
                                        <option value="{{info.name}}" {{info.current_target|yesno:"selected,"}} >{{info.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </li>
    {% endfor %}
</ul>
{% endblock %}
